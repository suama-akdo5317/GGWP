<%= @post.user.username %>


<br>
作成日：<%= @post.created_at.strftime("%Y-%m-%d %H:%M") %>
<br>
更新日：<%= @post.updated_at.strftime("%Y-%m-%d %H:%M") %>


<br>
title：<%= @post.title %><br>
content：<%= @post.content %>
<br>
<% @post.image.each do |image|%>
  <%= image_tag image.variant(resize: "500x500") %>
<% end %>

<div class="comment-wrapper border-top　mb-10">
  <p class="mt-5">コメント一覧</p>
  <% @comments.each do |c| %>
    <div>
<%
=begin
%>
      <% unless c.user.blank? %>
        <a href="<%= user_path(c.user_id) %>"><%= image_tag c.user.image.to_s, class:"rounded-circle icon_image mr-3 mb-3"%></a>
        <% end %>
<%
=end
%>
      <%= c.user.username unless c.user.blank? %>
      <br />
      <%= c.content %>
    </div>
    <br />
  <% end %>
  
  <% if user_signed_in? %>
    <%= form_with(model: [@post, @comment], local: true) do |f| %>
      <%= f.text_area :content, class: "form-control", rows: 5 %>
      <%= button_tag type: "submit", class: "btn btn-success float-right mt-1" do %>
        <i class="far fa-comments"></i> コメントする
      <% end %>
    <% end %>
  <% end %>
</div>


<h3>いいね件数: <%= @post.likes.count %></h3>

<h2>いいねしたユーザー</h2>
<% @post.liked_users.each do |user| %>
  <li><%= user.username %></li>
<% end %>

<%= render 'likes/like_button', like: @like %>


<br><br>
<% if user_signed_in? && current_user.id == @post.user_id %>
  <%= link_to "この投稿を編集する", edit_post_path %>
  <%= link_to 'この投稿を削除する', @post, method: :delete, data: { confirm: '本当に削除してよろしいですか？' } %>
<% end %>


<%= link_to "一覧に戻る", root_url %>

